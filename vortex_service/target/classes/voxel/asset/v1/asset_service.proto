syntax = "proto3";
package voxel.assets.v1;

import "voxel/common/v1/types.proto";

message ListPointCloudsRequest {
  string guru_id = 1;
}

message ListPointCloudsResponse {
  repeated voxel.common.v1.PointCloudMetadata point_clouds = 1;
}

message GetPointCloudRequest {
  string guru_id = 1;
  string variant = 2;     // optional; default variant returned when empty
  bool include_mesh = 3;  // request paired mesh when available
}

message PointCloudAsset {
  voxel.common.v1.PointCloudMetadata metadata = 1;
  voxel.common.v1.Pcd point_cloud = 2;
  voxel.common.v1.Mesh mesh = 3; // optional; omitted unless include_mesh=true
}

message GetPointCloudResponse {
  PointCloudAsset asset = 1;
}

service AssetService {
  // Enumerate available point clouds (neutral, expressions, lighting variants, etc.)
  rpc ListPointClouds(ListPointCloudsRequest) returns (ListPointCloudsResponse);

  // Fetch the binary point cloud (and optional mesh) for a guru/variant combination
  rpc GetPointCloud(GetPointCloudRequest) returns (GetPointCloudResponse);
}
